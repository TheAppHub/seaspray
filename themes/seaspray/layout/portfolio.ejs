<%- partial('_partials/page-hero', { title: page.title, description: page.description, heroImage: '/img/hero-pool-1.jpg', heroAlt: page.title }) %>

<section class="bg-primary-700">
    <div class="py-8 px-4 mx-auto max-w-screen-xl sm:py-16 lg:px-6">
        <div class="flex flex-wrap gap-2 mb-8 justify-center items-center pb-8 border-b border-primary-600 w-full">
            <% 
            const portfolioPosts = site.posts.filter(post => post.source.startsWith('_posts/portfolio/'));
            const portfolioTags = new Set();
            portfolioPosts.forEach(post => {
                if (post.tags && post.tags.length) {
                    post.tags.forEach(tag => portfolioTags.add(tag.name));
                }
            });
            %>
            <% portfolioTags.forEach(function(tagName) { %>
                <a href="<%- url_for('/portfolio-tags/' + tagName) %>" class="px-4 py-2 text-sm font-medium text-gray-300 bg-transparent border rounded-lg border-gray-200 hover:bg-primary-500 focus:z-10 focus:ring-1 focus:ring-gray-300">
                    <%= tagName %>
                </a>
            <% }); %>
        </div>
        <div class="grid gap-8 mb-16 md:grid-cols-2 lg:grid-cols-3">
            <% if (portfolioPosts.length > 0) { %>
                <% portfolioPosts.forEach(function(project) { %>
                    <article>
                        <a href="<%- url_for(project.path) %>">
                            <img class="mb-5 rounded-lg h-64 w-full object-cover" src="<%- url_for(project.path + '/' + project.thumbnail_image) %>" alt="<%= project.title %>">
                        </a>
                        <h2 class="my-2 text-2xl font-bold tracking-tight text-white">
                            <a href="<%- url_for(project.path) %>" class="text-white"><%= project.title %></a>
                        </h2>
                        <p class="mb-4 font-light text-primary-200"><%= project.project_details.pool_type || 'Swimming Pool' %></p>
                        <a href="<%- url_for(project.path) %>" class="inline-flex items-center font-medium text-secondary-400 hover:underline">
                            View project
                            <svg class="ml-2 w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                        </a>
                    </article>
                <% }); %>
            <% } else { %>
                <div class="col-span-3 text-center text-primary-200">
                    <p>No portfolio projects available at the moment.</p>
                </div>
            <% } %>
        </div>  
    </div>
</section>